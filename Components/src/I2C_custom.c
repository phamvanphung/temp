/*This is my I2c config*/
/*
*
*
*/

#include <stdio.h>
#include "M051Series.h"
#include "i2c.h"
#include "i2c_custom.h"

/*---------------------------------------------------------------------------------------------------------*/
/*  I2C READ Function                                                                               			 */
/*---------------------------------------------------------------------------------------------------------*/
uint8_t MY_I2C_READ(I2C_T *i2c)
{
	uint8_t RxData = 0;
	RxData = (unsigned char) I2C_GET_DATA(i2c);
  I2C_SET_CONTROL_REG(i2c, I2C_I2CON_STO_SI);
	return RxData;
}

/*---------------------------------------------------------------------------------------------------------*/
/*  I2C WRITE Function                                                                               			 */
/*---------------------------------------------------------------------------------------------------------*/
void MY_I2C_WRITE(I2C_T *i2c,uint8_t value)
{
	I2C_SET_DATA(i2c, value);
  I2C_SET_CONTROL_REG(i2c, I2C_I2CON_SI);
}

/*---------------------------------------------------------------------------------------------------------*/
/*  I2C INIT Function                                                                               			 */
/*---------------------------------------------------------------------------------------------------------*/

void MY_I2C_INIT(I2C_T *i2c, uint8_t addrDevice, uint32_t clk)
{
	/* Open I2C module and set bus clock */
    I2C_Open(i2c, clk);
	/*Set device slave*/
		I2C_SetSlaveAddr(i2c, 0, addrDevice, 0);   /* Slave Address */
	
}

/*---------------------------------------------------------------------------------------------------------*/
/*  I2C START Function                                                                               			 */
/*---------------------------------------------------------------------------------------------------------*/
void MY_I2C_START(I2C_T *i2c)
{
	I2C_START(i2c);
}


/*---------------------------------------------------------------------------------------------------------*/
/*  I2C CLOSE Function                                                                               			 */
/*---------------------------------------------------------------------------------------------------------*/
void MY_I2C_CLOSE(I2C_T *i2c)
{
	/* Disable I2C0 and close I2C0 clock */
    I2C_Close(i2c);
    CLK_DisableModuleClock(I2C1_MODULE);
}

/*---------------------------------------------------------------------------------------------------------*/
/*  I2C STOP Function                                                                               			 */
/*---------------------------------------------------------------------------------------------------------*/
void MY_I2C_STOP(I2C_T *i2c)
{
	I2C_STOP(i2c);
}






